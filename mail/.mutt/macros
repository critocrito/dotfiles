# -*- mode: muttrc -*-

# macros
macro generic R ":source ~/.muttrc\n" "Reload mutt's configuration file"
macro index   \cn <next-unread-mailbox>
bind  pager   <left>   exit
macro pager   j <next-line>
macro pager   k <previous-line>
macro pager   <PageUp> <previous-undeleted>
macro pager   <PageDown> <next-undeleted>
macro index   <left>   "c?"
bind browser  $       check-new
bind  index   <Tab>    next-unread
macro index   A1 "<change-folder>=cryptodrunks/INBOX\n" "Switch to cryptodrunks.net account"

# simulate the old url menu
macro index,pager \cb |urlview\n 'call urlview to extract URLs out of a message'

#macro index,pager \cb "<pipe-message> urlscan<Enter>"
#macro attach,compose \cb "<pipe-entry> urlscan<Enter>"

macro index I "<clear-flag>N" "Mark as read"
macro index U "<set-flag>N" "Mark as unread"

# Mark all messages as read
macro index <esc>m "T~N<enter>;WNT~O<enter>;WO\CT~T<enter>" "mark all messages read"

# mu search:
macro index / "<enter-command>unset wait_key<enter><shell-escape>read -p'mu query: ' x; \
      mu find --clearlinks --linksdir ~/.mail/mu-search --format links \$x<enter>\
      <change-folder-readonly>~/.mail/mu-search\n" "mu find"
macro index M "<change-folder-readonly>~/.mail/mu-search\n" "display mu-find results"

# Send the attachment to mailcap. Bind to <ENTER>, but m is possible too
bind attach <return>    view-mailcap

# vim: set ft=muttrc
